# --------------------------------------------------
# Core database
# --------------------------------------------------

# MongoDB connection string used by m87-server
# Usually points to the Mongo service name inside docker-compose
MONGO_URI=mongodb://mongo:27017

# Logical database name used by m87-server
MONGO_DB=m87-server

# MongoDB root username
# Only required if you run a Mongo init container or secured Mongo setup
MONGO_INITDB_ROOT_USERNAME=

# MongoDB root password
# Only required if you run a Mongo init container or secured Mongo setup
MONGO_INITDB_ROOT_PASSWORD=

# --------------------------------------------------
# Auth / OAuth
# --------------------------------------------------

# OAuth / OIDC issuer URL used to validate access tokens
# Example: Auth0 tenant or your own auth service
OAUTH_ISSUER=https://auth.make87.com/

# Expected OAuth audience for access tokens
# Must match the `aud` claim issued by the auth provider
OAUTH_AUDIENCE=https://auth.make87.com

# --------------------------------------------------
# Server networking
# --------------------------------------------------

# Public base address under which this server is reachable
# Used to check the sni of incoming requests for device id prefixes
PUBLIC_ADDRESS=your.public.domain

# Port for the unified public interface (typically proxied)
# needs to match the port that is mapped to 443 for quic endpoints
UNIFIED_PORT=8084

# Port for the REST API (may be internal or separately exposed)
# used for the webtransfort endpoint for the web app. Mapped to 8080
REST_PORT=8085

# --------------------------------------------------
# Environment / flags
# --------------------------------------------------

# Whether the server runs in staging mode
# 0 = production behavior
# 1 = staging / relaxed checks / verbose logging (if implemented)
STAGING=0

# Whether newly registered users require manual approval
# true  = user accounts start inactive until approved
# false = users are active immediately
USERS_NEED_APPROVAL=false

# Whether devices can be shared across users of diffrent organizations
# true  = cross-org device sharing allowed
# false = devices are restricted to their org
ALLOW_CROSS_ORG_DEVICE_SHARING=false

# Domains that are auto-approved on signup
# If user's email domain matches one of these, approval is skipped
# Comma-separated list, no spaces
USER_AUTO_ACCEPT_DOMAINS=
# Example:
# USER_AUTO_ACCEPT_DOMAINS=make87.com,example.org

# --------------------------------------------------
# Admin / security
# --------------------------------------------------

# Static admin API key
# Used for privileged actions such as:
# - approving users
# - creating organizations
# - bootstrapping admin access
ADMIN_KEY=change-me

# List of email addresses that should automatically receive admin privileges
# Comma-separated list, no spaces
ADMIN_EMAILS=
# Example:
# ADMIN_EMAILS=admin@org.com,admin@example.org

# --------------------------------------------------
# Retention (days)
# --------------------------------------------------

# Number of days audit log entries are retained
# Older entries are auto deleted
AUDIT_RETENTION_DAYS=30

# Number of days deployment / report data is retained
# Older reports are auto deleted
REPORT_RETENTION_DAYS=7
